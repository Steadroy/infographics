<section> 
    <h1 class="setting_header" data-ng-controller="SettingsController" data-ng-init="init()">
        <form name="teamName" role="form" data-ng-submit="update(teamName.$valid, global.teamActive.name)" novalidate> 
            General settings for 
            <input id="team_name" name="team_name" data-ng-model="global.teamActive.name" class="col-md-7"/>
            <label class="btn btn-success pull-right" role="button" data-ng-click="clone()" data-ng-show="teams.length < constants.max_teams"> 
                <i class="fa fa-copy"></i>
                Clone Team
            </label> 
        </form>
    </h1>
    <div role="tabpanel" class="col-md-12 col-sm-12"> 
        <tabset> 
            <tab data-ng-controller="ColoursController"> 
                <tab-heading>
                    <i class="fa fa-paint-brush"></i> Colours
                </tab-heading> 
                <div role="tabpanel" class="colours_panel tabpanel">
                    <ul class="nav nav-pills nav-stacked col-md-3 col-sm-3" role="tablist">
                        <li role="presentation" data-ng-class="{active: usage === coloursActive}" data-ng-repeat="usage in coloursUsage" >
                            <a href aria-controls="{{usage}}" role="tab" data-toggle="tab" data-ng-click="changeColoursActive(usage)">
                                {{ usage | pretify}}
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content col-md-9 col-sm-9">
                        <div role="tabpanel" class="tab-pane" id="{{usage}}" data-ng-class="{active: usage === coloursActive}" data-ng-repeat="usage in coloursUsage" > 
                            <h2>{{ usage | pretify}}</h2>
                            <hr/>
                            <div class="container col-md-12 col-sm-12"> 
                                <div class="col-md-2 col-sm-2 colour_container" data-ng-repeat="colour in global.teamActive.settings.colours[usage] track by $index">
                                    <input class="colour_input" colorpicker type="text" data-ng-model="colour.hex" style="background: {{colour | toRGBA}}" data-ng-blur="editColour(usage, $index, colour.hex, colour.alpha)" />
                                    <button tooltip="Remove {{colour.hex}}" tooltip-trigger="mouseenter" tooltip-placement="right" class="colour_remove" data-ng-click="removeColour(usage, $index)" role="button"><i class="fa fa-close"></i></button>
                                    <input type="range" min="0" max="1" step=".025" data-ng-model="colour.alpha" data-ng-blur="editColour(usage, $index, colour.hex, colour.alpha)" />
                                </div>
                                <div class="col-md-2 col-sm-2 colour_container colour_new" data-ng-show="global.teamActive.settings.colours[usage].length <  constants['max_' + usage + '_colours']">
                                    <input class="colour_input colour_new" colorpicker type="text" data-ng-model="newColour" style="background: {{newColour}}" data-ng-blur="addNewColour(usage, newColour); newColour = ''"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
            <tab data-ng-controller="FontsController" data-ng-init="init()">
                <tab-heading>
                    <i class="fa fa-font"></i> Fonts
                </tab-heading>
                <div data-ng-hide="global.teamActive.settings.colours.fonts.length > 0" class="alert alert-danger" role="alert">
                    <h3>No colours have been set for fonts.</h3>
                    <h4>Please, go to <strong data-ng-click="">Colours</strong> and configure them.</h4> 
                </div>
                <div role="tabpanel" class="fonts_panel tabpanel" data-ng-show="global.teamActive.settings.colours.fonts.length > 0"> 
                    <ul class="nav nav-pills nav-stacked col-md-3 col-sm-3" role="tablist">
                        <li role="presentation" data-ng-class="{active: font.name === fontActive}" data-ng-repeat="font in global.teamActive.settings.fonts" >
                            <a href aria-controls="{{font.name}}" role="tab" data-toggle="tab" data-ng-click="changeTextActive(font.name)">
                                {{font.name}}
                            </a>
                            <a role="button" data-ng-click="remove(font)" class="remove"><i class="fa fa-remove"></i></a>
                        </li>
                        <li role="presentation" data-ng-show="global.teamActive.settings.colours.fonts.length > 0 && global.teamActive.settings.fonts.length < constants.max_fonts"> 
                            <a role="menuitem" class="new_element_hover_plus"> 
                                <form name="newFont" role="form" data-ng-submit="create(newFont.$valid)" novalidate>
                                    <input class="new_font" name="new_font" type="text" placeholder="Add new font..." data-ng-model="font.name" required="" data-ng-blur="font.name = ''">
                                </form>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content col-md-9 col-sm-9">
                        <div role="tabpanel" class="tab-pane" id="{{font.name}}" data-ng-class="{active: font.name === fontActive}" data-ng-repeat="font in global.teamActive.settings.fonts">
                            <div class="example">
                                <h2>
                                    <form name="fontName" role="form" data-ng-submit="update(fontName.$valid, temporal_ref_name, $index)" novalidate data-ng-init="temporal_ref_name = font.name"> 
                                        <input id="font_name{{$index}}" data-ng-model="temporal_ref_name" class="col-md-10"/>
                                        <label class="btn btn-success" role="button" data-ng-click="clone($index)" data-ng-show="global.teamActive.settings.fonts.length < constants.max_fonts">
                                            <i class="fa fa-copy"></i>
                                            Clone Font
                                        </label>
                                    </form>
                                </h2>
                                <hr/>
                                <div style="{{font.style | parse}}">
                                    <p>The quick brown fox jumps over the lazy dog</p>
                                    <hr/>
                                    <!-- <span data-ng-repeat="i in []| range:33:126">{{i| fromCharCode}} </span> -->
                                </div>
                            </div>
                            <div class="controls">
                                <div class="btn-group" data-ng-repeat="group in buttonGroups">
                                    <label class="btn btn-primary" data-ng-repeat="button in group" role="button" data-ng-class="{active: font.style[button.style] === button.highlight || font.style[button.style].hex === button.highlight}" data-ng-click="toggleValue(button.style, $parent.$parent.$index, $parent.$index, $index, font.style[button.style] === button.highlight || font.style[button.style].hex === button.highlight, font.name)"><i class="fa {{button.icon}}"></i></label> 
                                </div>
                                <div class="btn-group dd-{{dd.style}}" dropdown data-ng-repeat='dd in buttonGroup2'>
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-ng-click="scroll('id-' + dd.style, (font.style[dd.style] | clean: font.style[dd.style].hex))"> 
                                        <span data-ng-show="dd.style !== 'color'">{{font.style[dd.style]}} </span>
                                        <span data-ng-show="dd.style === 'color'">
                                            <span class='dd-color' style='background: {{font.style[dd.style] | toRGBA}}'> </span> {{font.style[dd.style].hex}} 
                                        </span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul id="id-{{dd.style}}" class="dropdown-menu" role="menu">
                                        <li id="{{option | clean: option.hex}}" data-ng-class="{active: option === font.style[dd.style]}" data-ng-repeat="option in (dd.options === 'colours.fonts' ? global.teamActive.settings.colours.fonts : dd.options)">
                                            <a href data-ng-click="change(option, dd.style, $parent.$parent.$index, font.name)" >
                                                <span data-ng-show="dd.style === 'font-family'" style='font-family: {{option}}'>
                                                    {{option}}
                                                </span>
                                                <span data-ng-show="dd.style === 'font-size'">
                                                    {{option}}
                                                </span>
                                                <span data-ng-show="dd.style === 'color'">
                                                    <span class='dd-color' style='background: {{option | toRGBA}}'> </span> {{option.hex}}
                                                </span>
                                            </a>
                                        </li>  
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </tab>
            <tab>
                <tab-heading>
                    <i class="fa fa-table"></i> Borders and Frames
                </tab-heading>
                Borders and Frames content
            </tab>
            <tab>
                <tab-heading>
                    <i class="fa fa-users"></i> Team members
                </tab-heading>
                Team members content 
            </tab>
        </tabset>
    </div>
</section>
